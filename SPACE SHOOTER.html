<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Neon Space Defender 2.0</title>
    <style>
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
        body {
            margin: 0;
            overflow: hidden;
            background-color: #050505;
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            touch-action: none;
            user-select: none;
        }

        canvas {
            display: block;
        }

        /* –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å (UI) –ø–æ–≤–µ—Ä—Ö –∏–≥—Ä—ã */
        #ui-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            padding: 20px;
            box-sizing: border-box;
        }

        #coin-board {
            font-size: 28px;
            font-weight: bold;
            color: #ffd700; /* –ó–æ–ª–æ—Ç–æ–π */
            text-shadow: 0 0 10px #ffd700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* –≠–∫—Ä–∞–Ω –º–µ–Ω—é / –ú–∞–≥–∞–∑–∏–Ω */
        #menu-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            pointer-events: auto;
            transition: opacity 0.3s;
            overflow-y: auto;
            padding: 20px 0;
        }

        h1 {
            font-size: 40px;
            margin: 0 0 10px 0;
            color: #f0f;
            text-shadow: 0 0 20px #f0f;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 4px;
        }

        .stats-display {
            color: #aaa;
            margin-bottom: 20px;
            font-size: 16px;
        }

        /* –°–µ—Ç–∫–∞ –º–∞–≥–∞–∑–∏–Ω–∞ */
        .shop-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
            width: 95%;
            max-width: 700px;
        }

        .upgrade-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #333;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.2s;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .upgrade-card.epic {
            border: 1px solid #9932cc;
            background: rgba(153, 50, 204, 0.1);
        }

        .upgrade-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .upgrade-title {
            color: #0ff;
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .epic .upgrade-title {
            color: #d8bfd8; /* –°–≤–µ—Ç–ª–æ-—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π */
        }

        .upgrade-val {
            font-size: 20px;
            color: white;
            margin-bottom: 10px;
        }

        .buy-btn {
            background: transparent;
            color: #ffd700;
            border: 2px solid #ffd700;
            padding: 8px 10px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
            width: 100%;
            transition: all 0.2s;
        }

        .buy-btn:hover:not(:disabled) {
            background: #ffd700;
            color: black;
            box-shadow: 0 0 15px #ffd700;
        }

        .buy-btn:disabled {
            border-color: #444;
            color: #555;
            cursor: not-allowed;
            background: rgba(0,0,0,0.2);
        }

        #start-btn {
            padding: 15px 50px;
            font-size: 24px;
            background: #0f0;
            color: black;
            border: none;
            border-radius: 40px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 0 20px #0f0;
            text-transform: uppercase;
            margin-top: 10px;
            margin-bottom: 40px; /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É –¥–ª—è —Å–∫—Ä–æ–ª–ª–∞ */
        }

        #start-btn:hover {
            transform: scale(1.1);
            background: #5fff5f;
        }

        .hidden {
            opacity: 0;
            pointer-events: none !important;
        }
    </style>
</head>
<body>

    <!-- –°–ª–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ -->
    <div id="ui-layer">
        <div id="coin-board">üí∞ 0</div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –º–µ–Ω—é –∏ –º–∞–≥–∞–∑–∏–Ω–∞ -->
    <div id="menu-screen">
        <h1 id="game-title">NEON DEFENDER</h1>
        <div class="stats-display">–ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π –º–æ–Ω–µ—Ç—ã –∏ —É–ª—É—á—à–∞–π –∫–æ—Ä–∞–±–ª—å!</div>

        <div class="shop-grid">
            <!-- –û–±—ã—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è -->
            <div class="upgrade-card">
                <div class="upgrade-title">–ú–û–©–ù–û–°–¢–¨</div>
                <div class="upgrade-val" id="dmg-val">1</div>
                <button class="buy-btn" id="btn-buy-dmg" onclick="buyUpgrade('damage')">
                    –¶–µ–Ω–∞: 50
                </button>
            </div>

            <div class="upgrade-card">
                <div class="upgrade-title">–°–ö–û–†–û–°–¢–¨ –ê–¢–ê–ö–ò</div>
                <div class="upgrade-val" id="spd-val">–ú–µ–¥–ª–µ–Ω–Ω–æ</div>
                <button class="buy-btn" id="btn-buy-spd" onclick="buyUpgrade('speed')">
                    –¶–µ–Ω–∞: 100
                </button>
            </div>

            <!-- –≠–ø–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è -->
            <div class="upgrade-card epic">
                <div class="upgrade-title">–ú–£–õ–¨–¢–ò-–í–´–°–¢–†–ï–õ</div>
                <div class="upgrade-val" id="multi-val">x1</div>
                <button class="buy-btn" id="btn-buy-multi" onclick="buyUpgrade('multi')">
                    –¶–µ–Ω–∞: 1000
                </button>
            </div>

            <div class="upgrade-card epic">
                <div class="upgrade-title">–î–†–û–ù-–ü–û–ú–û–©–ù–ò–ö</div>
                <div class="upgrade-val" id="drone-val">0</div>
                <button class="buy-btn" id="btn-buy-drone" onclick="buyUpgrade('drone')">
                    –¶–µ–Ω–∞: 2500
                </button>
            </div>
        </div>

        <button id="start-btn">–í –ë–û–ô</button>
    </div>

    <!-- –•–æ–ª—Å—Ç –¥–ª—è –∏–≥—Ä—ã -->
    <canvas id="gameCanvas"></canvas>

    <script>
        // --- –ù–ê–°–¢–†–û–ô–ö–ò ---
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const coinEl = document.getElementById('coin-board');
        const menuScreen = document.getElementById('menu-screen');
        const startBtn = document.getElementById('start-btn');
        const gameTitle = document.getElementById('game-title');

        // –≠–ª–µ–º–µ–Ω—Ç—ã –º–∞–≥–∞–∑–∏–Ω–∞
        const uiDmgVal = document.getElementById('dmg-val');
        const uiSpdVal = document.getElementById('spd-val');
        const uiMultiVal = document.getElementById('multi-val');
        const uiDroneVal = document.getElementById('drone-val');

        const btnBuyDmg = document.getElementById('btn-buy-dmg');
        const btnBuySpd = document.getElementById('btn-buy-spd');
        const btnBuyMulti = document.getElementById('btn-buy-multi');
        const btnBuyDrone = document.getElementById('btn-buy-drone');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        let totalCoins = 0;

        // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–∞
        let playerStats = {
            damage: 1,
            fireRateDelay: 20,
            multishot: 1,     // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—É–ª—å –∑–∞ –≤—ã—Å—Ç—Ä–µ–ª
            droneCount: 0     // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥—Ä–æ–Ω–æ–≤
        };

        // –¶–µ–Ω—ã
        let costs = {
            damage: 50,
            speed: 100,
            multi: 1000,
            drone: 2500
        };

        let isPlaying = false;
        let animationId;
        let frames = 0;
        let difficultyFactor = 1;

        // --- –ö–õ–ê–°–°–´ ---

        class Player {
            constructor() {
                this.x = canvas.width / 2;
                this.y = canvas.height - 100;
                this.radius = 20;
                this.color = '#0ff';
            }

            draw() {
                ctx.beginPath();
                ctx.moveTo(this.x, this.y - this.radius);
                ctx.lineTo(this.x - this.radius, this.y + this.radius);
                ctx.lineTo(this.x + this.radius, this.y + this.radius);
                ctx.closePath();
                ctx.fillStyle = this.color;
                ctx.shadowBlur = 20;
                ctx.shadowColor = this.color;
                ctx.fill();
                ctx.shadowBlur = 0;
            }

            update(inputX) {
                if (inputX) this.x = inputX;
                if (this.x < this.radius) this.x = this.radius;
                if (this.x > canvas.width - this.radius) this.x = canvas.width - this.radius;
                this.draw();
            }

            shoot() {
                const count = playerStats.multishot;
                const spreadAngle = 0.15; // –£–≥–æ–ª —Ä–∞–∑–±—Ä–æ—Å–∞ –≤ —Ä–∞–¥–∏–∞–Ω–∞—Ö

                for (let i = 0; i < count; i++) {
                    // –í—ã—á–∏—Å–ª—è–µ–º —É–≥–æ–ª –¥–ª—è –∫–∞–∂–¥–æ–π –ø—É–ª–∏, —á—Ç–æ–±—ã –æ–Ω–∏ –ª–µ—Ç–µ–ª–∏ –≤–µ–µ—Ä–æ–º
                    // –ï—Å–ª–∏ –ø—É–ª—è 1 -> —É–≥–æ–ª -PI/2 (–ø—Ä—è–º–æ –≤–≤–µ—Ä—Ö)
                    // –ï—Å–ª–∏ –ø—É–ª—å –±–æ–ª—å—à–µ, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –∏—Ö –≤–æ–∫—Ä—É–≥ —Ü–µ–Ω—Ç—Ä–∞
                    let offset = 0;
                    if (count > 1) {
                        offset = (i - (count - 1) / 2) * spreadAngle;
                    }

                    const angle = -Math.PI / 2 + offset;
                    projectiles.push(new Projectile(this.x, this.y - this.radius, playerStats.damage, angle));
                }
            }
        }

        // –ö–ª–∞—Å—Å –î—Ä–æ–Ω–∞-–ø–æ–º–æ—â–Ω–∏–∫–∞
        class Drone {
            constructor(owner, index, total) {
                this.owner = owner;
                this.angle = (Math.PI * 2 * index) / total; // –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–æ–∫—Ä—É–≥
                this.orbitRadius = 50;
                this.radius = 8;
                this.color = '#aa00ff';
                this.x = 0;
                this.y = 0;
                this.shootTimer = 0;
            }

            update() {
                // –í—Ä–∞—â–µ–Ω–∏–µ –≤–æ–∫—Ä—É–≥ –∏–≥—Ä–æ–∫–∞
                this.angle += 0.05;
                this.x = this.owner.x + Math.cos(this.angle) * this.orbitRadius;
                this.y = this.owner.y + Math.sin(this.angle) * this.orbitRadius;

                // –û—Ç—Ä–∏—Å–æ–≤–∫–∞
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.shadowBlur = 10;
                ctx.shadowColor = this.color;
                ctx.fill();
                ctx.shadowBlur = 0;

                // –°—Ç—Ä–µ–ª—å–±–∞ (–¥—Ä–æ–Ω—ã —Å—Ç—Ä–µ–ª—è—é—Ç —á—É—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ –∏–≥—Ä–æ–∫–∞, –Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
                this.shootTimer++;
                if (this.shootTimer % 40 === 0) {
                    // –î—Ä–æ–Ω —Å—Ç—Ä–µ–ª—è–µ—Ç –ø—Ä—è–º–æ –≤–≤–µ—Ä—Ö
                    projectiles.push(new Projectile(this.x, this.y, Math.ceil(playerStats.damage / 2), -Math.PI / 2));
                }
            }
        }

        class Projectile {
            constructor(x, y, damage, angle) {
                this.x = x;
                this.y = y;
                this.radius = 4;
                this.color = '#ff0';
                this.speed = 12;
                this.damage = damage;
                // –í–µ–∫—Ç–æ—Ä –¥–≤–∏–∂–µ–Ω–∏—è
                this.vx = Math.cos(angle) * this.speed;
                this.vy = Math.sin(angle) * this.speed;
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);
                ctx.fillStyle = this.color;
                ctx.shadowBlur = 10;
                ctx.shadowColor = this.color;
                ctx.fill();
                ctx.shadowBlur = 0;
            }

            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.draw();
            }
        }

        class Enemy {
            constructor() {
                this.radius = Math.random() * 20 + 20;
                this.x = Math.random() * (canvas.width - this.radius * 2) + this.radius;
                this.y = -this.radius;

                const baseHp = Math.floor(difficultyFactor);
                this.maxHp = baseHp;
                this.hp = baseHp;

                const colors = ['#f0f', '#0f0', '#f00', '#ffa500', '#fff'];
                this.color = colors[Math.floor(Math.random() * colors.length)];
                this.velocity = Math.random() * 1.5 + 1 + (difficultyFactor * 0.05);
            }

            draw() {
                ctx.beginPath();
                ctx.rect(this.x - this.radius, this.y - this.radius, this.radius * 2, this.radius * 2);
                ctx.strokeStyle = this.color;
                ctx.lineWidth = 3;
                ctx.shadowBlur = 15;
                ctx.shadowColor = this.color;
                ctx.stroke();

                ctx.fillStyle = '#fff';
                ctx.font = 'bold 16px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.shadowBlur = 0;
                ctx.fillText(this.hp, this.x, this.y);
            }

            update() {
                this.y += this.velocity;
                this.draw();
            }
        }

        class Particle {
            constructor(x, y, color) {
                this.x = x;
                this.y = y;
                this.radius = Math.random() * 3;
                this.color = color;
                this.velocity = {
                    x: (Math.random() - 0.5) * 8,
                    y: (Math.random() - 0.5) * 8
                };
                this.alpha = 1;
            }

            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);
                ctx.fillStyle = this.color;
                ctx.fill();
                ctx.restore();
            }

            update() {
                this.x += this.velocity.x;
                this.y += this.velocity.y;
                this.alpha -= 0.02;
                this.draw();
            }
        }

        class FloatingText {
            constructor(x, y, text) {
                this.x = x;
                this.y = y;
                this.text = text;
                this.alpha = 1;
                this.velocity = 1;
            }
            update() {
                this.y -= this.velocity;
                this.alpha -= 0.03;
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.fillStyle = '#ffd700';
                ctx.font = 'bold 20px Arial';
                ctx.fillText(this.text, this.x, this.y);
                ctx.restore();
            }
        }

        // --- –£–ü–†–ê–í–õ–ï–ù–ò–ï ---

        let player = new Player();
        let drones = [];
        let projectiles = [];
        let enemies = [];
        let particles = [];
        let floatingTexts = [];
        let inputX = canvas.width / 2;

        window.addEventListener('mousemove', (e) => { if(isPlaying) inputX = e.clientX; });
        window.addEventListener('touchmove', (e) => {
            if(isPlaying) { e.preventDefault(); inputX = e.touches[0].clientX; }
        }, {passive: false});
        window.addEventListener('touchstart', (e) => { if(isPlaying) inputX = e.touches[0].clientX; });
        window.addEventListener('resize', () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; player.y = canvas.height - 100; });

        // --- –ú–ê–ì–ê–ó–ò–ù –ò –ê–ü–ì–†–ï–ô–î–´ ---

        function updateShopUI() {
            uiDmgVal.innerText = playerStats.damage;
            uiSpdVal.innerText = (60 / playerStats.fireRateDelay).toFixed(1) + "/—Å–µ–∫";
            uiMultiVal.innerText = "x" + playerStats.multishot;
            uiDroneVal.innerText = playerStats.droneCount;

            btnBuyDmg.innerText = `–¶–µ–Ω–∞: ${costs.damage} üí∞`;
            btnBuySpd.innerText = `–¶–µ–Ω–∞: ${costs.speed} üí∞`;
            btnBuyMulti.innerText = `–¶–µ–Ω–∞: ${costs.multi} üí∞`;
            btnBuyDrone.innerText = `–¶–µ–Ω–∞: ${costs.drone} üí∞`;

            btnBuyDmg.disabled = totalCoins < costs.damage;
            btnBuySpd.disabled = totalCoins < costs.speed;
            btnBuyMulti.disabled = totalCoins < costs.multi;
            btnBuyDrone.disabled = totalCoins < costs.drone; // –ú–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –º–∞–∫—Å –∫–æ–ª-–≤–æ –¥—Ä–æ–Ω–æ–≤

            coinEl.innerText = `üí∞ ${totalCoins}`;
        }

        window.buyUpgrade = function(type) {
            if (type === 'damage' && totalCoins >= costs.damage) {
                totalCoins -= costs.damage;
                playerStats.damage += 1;
                costs.damage = Math.floor(costs.damage * 1.5);
            } else if (type === 'speed' && totalCoins >= costs.speed) {
                if (playerStats.fireRateDelay > 5) {
                    totalCoins -= costs.speed;
                    playerStats.fireRateDelay -= 2;
                    costs.speed = Math.floor(costs.speed * 1.5);
                }
            } else if (type === 'multi' && totalCoins >= costs.multi) {
                totalCoins -= costs.multi;
                playerStats.multishot += 1;
                costs.multi = Math.floor(costs.multi * 2); // –¶–µ–Ω–∞ —Ä–∞—Å—Ç–µ—Ç —Å–∏–ª—å–Ω–æ
            } else if (type === 'drone' && totalCoins >= costs.drone) {
                totalCoins -= costs.drone;
                playerStats.droneCount += 1;
                costs.drone = Math.floor(costs.drone * 1.5);
            }
            updateShopUI();
        }

        // --- –ò–ì–†–û–í–û–ô –¶–ò–ö–õ ---

        function initGame() {
            player = new Player();
            projectiles = [];
            enemies = [];
            particles = [];
            floatingTexts = [];
            drones = [];

            // –°–æ–∑–¥–∞–µ–º –¥—Ä–æ–Ω–æ–≤
            for(let i=0; i<playerStats.droneCount; i++) {
                drones.push(new Drone(player, i, playerStats.droneCount));
            }

            difficultyFactor = 1;
            frames = 0;
            inputX = canvas.width / 2;
        }

        function animate() {
            if (!isPlaying) return;

            animationId = requestAnimationFrame(animate);
            ctx.fillStyle = 'rgba(5, 5, 5, 0.3)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            player.update(inputX);

            // –û–±–Ω–æ–≤–ª—è–µ–º –¥—Ä–æ–Ω–æ–≤
            drones.forEach(drone => drone.update());

            if (frames % playerStats.fireRateDelay === 0) {
                player.shoot();
            }

            if (frames % 300 === 0) difficultyFactor++;

            // –ß–∞—Å—Ç–∏—Ü—ã
            particles.forEach((p, i) => {
                if (p.alpha <= 0) particles.splice(i, 1);
                else p.update();
            });

            // –¢–µ–∫—Å—Ç
            floatingTexts.forEach((t, i) => {
                if (t.alpha <= 0) floatingTexts.splice(i, 1);
                else t.update();
            });

            // –°–Ω–∞—Ä—è–¥—ã (—É–¥–∞–ª–µ–Ω–∏–µ –∑–∞ —ç–∫—Ä–∞–Ω–æ–º —á—É—Ç—å —Å–ª–æ–∂–Ω–µ–µ –∏–∑-–∑–∞ —É–≥–ª–æ–≤)
            projectiles.forEach((p, i) => {
                p.update();
                // –£–¥–∞–ª—è–µ–º –µ—Å–ª–∏ —É–ª–µ—Ç–µ–ª –¥–∞–ª–µ–∫–æ
                if (p.x < -50 || p.x > canvas.width + 50 || p.y < -50 || p.y > canvas.height + 50) {
                    projectiles.splice(i, 1);
                }
            });

            // –°–ø–∞–≤–Ω –≤—Ä–∞–≥–æ–≤
            let spawnRate = Math.max(20, 60 - Math.floor(difficultyFactor / 2));
            if (frames % spawnRate === 0) {
                enemies.push(new Enemy());
            }

            // –õ–æ–≥–∏–∫–∞ –≤—Ä–∞–≥–æ–≤
            enemies.forEach((enemy, index) => {
                enemy.update();

                // –ö–æ–ª–ª–∏–∑–∏—è —Å –∏–≥—Ä–æ–∫–æ–º
                const distToPlayer = Math.hypot(player.x - enemy.x, player.y - enemy.y);
                if (distToPlayer - enemy.radius - player.radius < 1) {
                    endGame();
                }

                // –ö–æ–ª–ª–∏–∑–∏—è —Å–æ —Å–Ω–∞—Ä—è–¥–∞–º–∏
                projectiles.forEach((proj, pIndex) => {
                    const dist = Math.hypot(proj.x - enemy.x, proj.y - enemy.y);

                    if (dist - enemy.radius - proj.radius < 1) {
                        for (let i = 0; i < 3; i++) particles.push(new Particle(proj.x, proj.y, enemy.color));
                        projectiles.splice(pIndex, 1);

                        enemy.hp -= proj.damage;

                        if (enemy.hp <= 0) {
                            for (let i = 0; i < 10; i++) particles.push(new Particle(enemy.x, enemy.y, enemy.color));

                            let reward = Math.floor(enemy.maxHp * 2);
                            totalCoins += reward;
                            coinEl.innerText = `üí∞ ${totalCoins}`;
                            floatingTexts.push(new FloatingText(enemy.x, enemy.y, `+${reward}`));

                            enemies.splice(index, 1);
                        }
                    }
                });

                if (enemy.y > canvas.height) {
                    enemies.splice(index, 1);
                }
            });

            frames++;
        }

        // --- –°–û–°–¢–û–Ø–ù–ò–ï ---

        function startGame() {
            initGame();
            isPlaying = true;
            menuScreen.classList.add('hidden');
            animate();
        }

        function endGame() {
            isPlaying = false;
            cancelAnimationFrame(animationId);
            gameTitle.innerText = "–£–ù–ò–ß–¢–û–ñ–ï–ù";
            updateShopUI();
            startBtn.innerText = "–°–ù–û–í–ê –í –ë–û–ô";
            menuScreen.classList.remove('hidden');
        }

        startBtn.addEventListener('click', startGame);

        updateShopUI();
        ctx.fillStyle = '#050505';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

    </script>
</body>
</html>